<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>System Health</title>
  <meta name="robots" content="noindex"/>
  <link rel="alternate" type="application/json" title="JSON" href="?format=json">
  <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="?format=atom">
  <link rel="alternate" type="application/rss+xml" title="RSS Feed" href="?format=rss">

  <script>document.documentElement.setAttribute('data-theme', localStorage.getItem('theme') || 'light');</script>
  <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
  <link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css" rel="stylesheet" type="text/css"/>
  <script src="https://unpkg.com/lucide@latest"></script>
  <link rel="icon" href="https://fav.farm/ðŸ‘¥"/>

  <style>[x-cloak] { display: none !important; }</style>
</head>
<body class="bg-base-200 min-h-screen flex items-center justify-center p-4">

  <div class="w-full max-w-2xl">
    <!-- Status badge -->
    <div class="flex flex-col items-center mb-8">
      {% if errors %}
        <div class="w-16 h-16 rounded-full bg-error/10 flex items-center justify-center mb-4">
          <i data-lucide="alert-triangle" class="w-8 h-8 text-error"></i>
        </div>
        <h1 class="text-2xl font-bold">System Unhealthy</h1>
        <p class="text-base-content/50 text-sm mt-1">One or more services have issues</p>
      {% else %}
        <div class="w-16 h-16 rounded-full bg-success/10 flex items-center justify-center mb-4">
          <i data-lucide="check-circle" class="w-8 h-8 text-success"></i>
        </div>
        <h1 class="text-2xl font-bold">All Systems Operational</h1>
        <p class="text-base-content/50 text-sm mt-1">All services are running normally</p>
      {% endif %}
    </div>

    <!-- Services card -->
    <div class="card bg-base-100 shadow-sm">
      <div class="card-body p-0">
        <div class="px-5 py-3 border-b border-base-300">
          <h2 class="font-semibold text-sm text-base-content/70 uppercase tracking-wide">Services</h2>
        </div>

        <ul class="divide-y divide-base-300">
          {% for result in results %}
            <li class="flex items-center justify-between gap-4 px-5 py-3">
              <div class="flex items-center gap-3 min-w-0">
                {% if result.error %}
                  <i data-lucide="x-circle" class="w-4 h-4 text-error shrink-0"></i>
                {% else %}
                  <i data-lucide="check-circle" class="w-4 h-4 text-success shrink-0"></i>
                {% endif %}
                <span class="font-medium truncate">{{ result.check }}</span>
              </div>
              <div class="flex items-center gap-3 shrink-0">
                {% if result.error %}
                  <span class="badge badge-error badge-sm">{{ result.error }}</span>
                {% else %}
                  <span class="badge badge-success badge-sm">OK</span>
                {% endif %}
                <span class="text-xs text-base-content/40 font-mono w-16 text-right">{{ result.time_taken|floatformat:3 }}s</span>
              </div>
            </li>
          {% endfor %}
        </ul>
      </div>
    </div>

    <!-- Footer -->
    <p class="text-center text-xs text-base-content/30 mt-6">
      Checked at {% now "SHORT_DATETIME_FORMAT" %}
    </p>
  </div>

  <script>document.addEventListener('DOMContentLoaded', function() { if (typeof lucide !== 'undefined') lucide.createIcons(); });</script>
</body>
</html>
