{% comment %}
Drawer Item Component
=====================
A reusable component for drawer/sidebar menu items.

Parameters:
-----------
- href: URL for the link (optional if disabled; if omitted, renders a button)
- icon: Lucide icon name (e.g., "folder", "clock", "trash-2")
- icon_binding: Optional Alpine.js expression for dynamic icon names
- label: Text label for the item
- active: Boolean, whether this item is currently active (default: False)
- active_binding: Optional Alpine.js expression to control active state
- disabled: Boolean, whether this item is disabled (default: False)
- badge: Optional badge text (e.g., "Soon", "3", "New")
- badge_type: Badge variant (default: "sm") - can be "xs", "sm", "md", "lg"
- x_target: Optional Alpine.js x-target attribute
- x_target_history: Optional x-target history mode ("push" or "replace")
- onclick: Optional JavaScript onclick handler
- tooltip: Optional tooltip text for collapsed state
- title_binding: Optional Alpine.js expression for the title attribute
- aria_label: Optional static aria-label text
- aria_label_binding: Optional Alpine.js expression for aria-label

Usage Examples:
---------------
{% include "ui/partials/drawer_item.html" with href="/files" icon="folder" label="All Files" active=True %}
{% include "ui/partials/drawer_item.html" with icon="clock" label="Recent" disabled=True badge="Soon" %}
{% include "ui/partials/drawer_item.html" with href="/trash" icon="trash-2" label="Trash" badge="5" badge_type="error" %}
{% endcomment %}

<li class="list-none">
  {% if disabled %}
    <span
      class="flex items-center opacity-50 cursor-not-allowed p-2 text-base rounded-lg transition-colors hover:bg-base-300/30"
      :class="collapsed ? 'justify-center w-10 h-10 px-0' : 'gap-3'"
      {% if title_binding %}
        :title="{{ title_binding|safe }}"
      {% else %}
        :title="collapsed ? '{{ label }}{% if badge %} ({{ badge }}){% endif %}' : ''"
      {% endif %}
      {% if aria_label_binding %}
        :aria-label="{{ aria_label_binding|safe }}"
      {% elif aria_label %}
        aria-label="{{ aria_label }}"
      {% endif %}
      {% if onclick %}@click="{{ onclick }}"{% endif %}
    >
      {% if icon_binding %}
        <i :data-lucide="{{ icon_binding|safe }}" class="w-5 h-5 flex-shrink-0"></i>
      {% else %}
        <i data-lucide="{{ icon }}" class="w-5 h-5 flex-shrink-0"></i>
      {% endif %}
      <span x-show="!collapsed" x-transition class="flex items-center gap-2 flex-1">
        {{ label }}
        {% if badge %}
          <span class="badge badge-{{ badge_type|default:'sm' }}">{{ badge }}</span>
        {% endif %}
      </span>
    </span>
  {% elif href %}
    <a
      href="{{ href }}"
      {% if active_binding %}
        class="flex items-center hover:bg-base-300/50 p-2 text-base rounded-lg transition-colors"
        :class="[
          collapsed ? 'justify-center w-10 h-10 px-0' : 'gap-3',
          ({{ active_binding|safe }}) ? 'bg-primary/10 text-primary hover:bg-primary/20' : ''
        ]"
      {% else %}
        class="flex items-center {% if active %}bg-primary/10 text-primary hover:bg-primary/20{% else %}hover:bg-base-300/50{% endif %} p-2 text-base rounded-lg transition-colors"
        :class="collapsed ? 'justify-center w-10 h-10 px-0' : 'gap-3'"
      {% endif %}
      {% if x_target %}x-target{% if x_target_history %}.{{ x_target_history }}{% endif %}="{{ x_target }}"{% endif %}
      {% if onclick %}@click="{{ onclick }}"{% endif %}
      {% if title_binding %}
        :title="{{ title_binding|safe }}"
      {% else %}
        :title="collapsed ? '{{ tooltip|default:label }}' : ''"
      {% endif %}
      {% if aria_label_binding %}
        :aria-label="{{ aria_label_binding|safe }}"
      {% elif aria_label %}
        aria-label="{{ aria_label }}"
      {% endif %}
    >
      {% if icon_binding %}
        <i :data-lucide="{{ icon_binding|safe }}" class="w-5 h-5 flex-shrink-0"></i>
      {% else %}
        <i data-lucide="{{ icon }}" class="w-5 h-5 flex-shrink-0"></i>
      {% endif %}
      <span x-show="!collapsed" x-transition class="flex items-center gap-2 flex-1">
        {{ label }}
        {% if badge %}
          <span class="badge badge-{{ badge_type|default:'sm' }}{% if badge_variant %} badge-{{ badge_variant }}{% endif %}">{{ badge }}</span>
        {% endif %}
      </span>
    </a>
  {% else %}
    <button
      type="button"
      {% if active_binding %}
        class="flex items-center w-full text-left hover:bg-base-300/50 p-2 text-base rounded-lg transition-colors"
        :class="[
          collapsed ? 'justify-center w-10 h-10 px-0' : 'gap-3',
          ({{ active_binding|safe }}) ? 'bg-primary/10 text-primary hover:bg-primary/20' : ''
        ]"
      {% else %}
        class="flex items-center w-full text-left {% if active %}bg-primary/10 text-primary hover:bg-primary/20{% else %}hover:bg-base-300/50{% endif %} p-2 text-base rounded-lg transition-colors"
        :class="collapsed ? 'justify-center w-10 h-10 px-0' : 'gap-3'"
      {% endif %}
      {% if x_target %}x-target{% if x_target_history %}.{{ x_target_history }}{% endif %}="{{ x_target }}"{% endif %}
      {% if onclick %}@click="{{ onclick }}"{% endif %}
      {% if title_binding %}
        :title="{{ title_binding|safe }}"
      {% else %}
        :title="collapsed ? '{{ tooltip|default:label }}' : ''"
      {% endif %}
      {% if aria_label_binding %}
        :aria-label="{{ aria_label_binding|safe }}"
      {% elif aria_label %}
        aria-label="{{ aria_label }}"
      {% endif %}
    >
      {% if icon_binding %}
        <i :data-lucide="{{ icon_binding|safe }}" class="w-5 h-5 flex-shrink-0"></i>
      {% else %}
        <i data-lucide="{{ icon }}" class="w-5 h-5 flex-shrink-0"></i>
      {% endif %}
      <span x-show="!collapsed" x-transition class="flex items-center gap-2 flex-1">
        {{ label }}
        {% if badge %}
          <span class="badge badge-{{ badge_type|default:'sm' }}{% if badge_variant %} badge-{{ badge_variant }}{% endif %}">{{ badge }}</span>
        {% endif %}
      </span>
    </button>
  {% endif %}
</li>
