<!-- PDF Viewer (native browser) -->
<div class="flex flex-col h-full" x-data="pdfViewerData()">
  <!-- Toolbar -->
  <div class="flex items-center justify-center gap-2 p-2 bg-base-100 border-b border-base-300">
    <a href="/api/v1/files/{{ file.uuid }}/content"
       target="_blank"
       class="btn btn-sm btn-ghost" title="Open in new tab">
      <i data-lucide="external-link" class="w-4 h-4"></i>
      <span class="hidden sm:inline">New tab</span>
    </a>
  </div>

  <!-- PDF iframe -->
  <iframe
    src="/api/v1/files/{{ file.uuid }}/content"
    class="flex-1 w-full border-none bg-base-200"
    title="{{ file.name }}"
    @load="onLoad()"
  ></iframe>

  <!-- Loading overlay (shown until iframe loads) -->
  <div x-show="loading" class="absolute inset-0 flex items-center justify-center bg-base-200/80 z-10" x-cloak>
    <span class="loading loading-spinner loading-lg"></span>
  </div>
</div>

<script>
window.pdfViewerData = function pdfViewerData() {
  return {
    loading: true,

    init() {
      this.$nextTick(() => {
        if (typeof lucide !== 'undefined') lucide.createIcons();
      });
    },

    onLoad() {
      this.loading = false;
    },
  };
};
</script>
