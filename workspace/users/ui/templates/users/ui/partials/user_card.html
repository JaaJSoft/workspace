{% load avatar_tags %}
<div id="user-card-{{ card_user.id }}">
<div class="p-3 w-64">
  <div class="flex items-center gap-3 mb-2">
    {% include "ui/partials/user_avatar.html" with user=card_user size="md" %}
    <div class="min-w-0 flex-1">
      <div class="font-semibold text-sm truncate">
        {% if card_user.first_name or card_user.last_name %}
          {{ card_user.first_name }} {{ card_user.last_name }}
        {% else %}
          {{ card_user.username }}
        {% endif %}
      </div>
      <div class="text-xs text-base-content/50 truncate">@{{ card_user.username }}</div>
    </div>
  </div>

  <div class="space-y-1 text-xs text-base-content/60 mb-3">
    <div class="flex items-center gap-1.5">
      <span class="w-2 h-2 rounded-full flex-shrink-0 {% if card_user_status == 'online' %}bg-success{% elif card_user_status == 'away' %}bg-warning{% else %}bg-base-300{% endif %}"></span>
      <span class="{% if card_user_status == 'online' %}text-success{% elif card_user_status == 'away' %}text-warning{% else %}text-base-content/40{% endif %} font-medium capitalize">{{ card_user_status }}</span>
    </div>
    {% if card_user.email %}
    <div class="flex items-center gap-1.5 truncate">
      <i data-lucide="mail" class="w-3 h-3 flex-shrink-0"></i>
      <span class="truncate">{{ card_user.email }}</span>
    </div>
    {% endif %}
    <div class="flex items-center gap-1.5">
      <i data-lucide="calendar" class="w-3 h-3 flex-shrink-0"></i>
      <span>Joined {{ card_user.date_joined|date:"N j, Y" }}</span>
    </div>
    {% if card_user.is_superuser %}
    <span class="badge badge-sm badge-primary gap-1">
      <i data-lucide="shield" class="w-2.5 h-2.5"></i>
      Admin
    </span>
    {% elif card_user.is_staff %}
    <span class="badge badge-sm badge-secondary gap-1">
      <i data-lucide="briefcase" class="w-2.5 h-2.5"></i>
      Staff
    </span>
    {% endif %}
  </div>

  <div class="flex gap-1">
    <a href="{% url 'users_ui:profile_by_username' card_user.username %}" class="btn btn-ghost btn-xs flex-1 gap-1">
      <i data-lucide="user" class="w-3 h-3"></i>
      Profile
    </a>
    {% if card_user.id != request.user.id %}
    <a href="/chat?dm={{ card_user.id }}" class="btn btn-outline btn-info btn-xs flex-1 gap-1">
      <i data-lucide="message-circle" class="w-3 h-3"></i>
      Message
    </a>
    {% endif %}
  </div>
</div>
</div>
